<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Armada</title></head><body>
<h2>Daftar Armada</h2>
<form id="add"><input name="nopol" placeholder="NoPol"><input name="tipe" placeholder="Tipe"><input name="tahun" placeholder="Tahun"><button>Tambah</button></form>
<table border="1"><thead><tr><th>ID</th><th>NoPol</th><th>Tipe</th><th>Tahun</th><th>Aksi</th></tr></thead><tbody></tbody></table>
<script>
const u=JSON.parse(localStorage.getItem('user'));const API=window.location.href.split('?')[0];async function load(){const r=await fetch(`${API}?action=getArmada&id_pt=${u.id_pt}`).then(x=>x.json());const tb=document.querySelector('tbody');tb.innerHTML='';r.forEach(x=>{tb.innerHTML+=`<tr><td>${x.id_armada}</td><td>${x.nopol}</td><td>${x.tipe}</td><td>${x.tahun}</td><td><button data-id='${x.id_armada}'>Del</button></td></tr>`;});}
load();
document.getElementById('add').onsubmit=async e=>{e.preventDefault();const f=e.target;const p={action:'addArmada',nopol:f.nopol.value,tipe:f.tipe.value,tahun:f.tahun.value,id_pt:u.id_pt};await fetch(API,{method:'POST',body:JSON.stringify(p)});load();}
document.addEventListener('click',async e=>{if(e.target.dataset.id){await fetch(API,{method:'POST',body:JSON.stringify({action:'deleteArmada',id_armada:e.target.dataset.id})});load();}});
</script></body></html>
